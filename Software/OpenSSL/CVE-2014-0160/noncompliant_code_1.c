//For understanding purpose of this file check (Reading List)#2 in readme file
#include <stdio.h>
#include <string.h>
#include <wchar.h>
#include <unistd.h>
 
static const char str[] = "Hello world";
static const wchar_t w_str[] = L"Hello world";
void func(void) 
{
 	char buffer[32];
  	wchar_t w_buffer[32];
  	memcpy(buffer, str, sizeof(str)); /* Compliant */
  	printf("%ld\n",sizeof(w_str));
  	sleep(1); //Just added to make sure printf statment gets enough time to print before protection mechanism 
  	          //used by gcc to detect buffer overflow errors
  	//To supress this mechanism use -fno-stack-protector option while compiling.Since it is enabled by default there is
  	//little chance that this can be exploited by anyone now.This is like accessing illegal memory location hence segmentation
  	//fault will be thrown even when we will use -fno-stack-protector.Mostly illegal memory location is not what we are interested(
  	//I guess(since it is already always protected) but we will know for sure as we see more noncompliant code examples.
  	wmemcpy(w_buffer, w_str, sizeof(w_str)); /* Noncompliant */ //This is noncmpliant as wmemcpy does not use no of bytes as it third
  	                                                            //argument but rather no of w_char_t and sizeof returns no of bytes.
}
int main()
{
	func();
	return 0;
}